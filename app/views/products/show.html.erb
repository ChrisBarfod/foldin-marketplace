<div class="container">
<p id="notice"><%= notice %></p>

<p>
  <%= link_to(image_tag(@product.product_image.thumb.url, alt: 'Image'), @product.product_image.url, target: '_blank') if @product.product_image? %>
</p>

<p>
  <strong>Name:</strong>
  <%= @product.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @product.description %>
</p>

<p>
  <strong>Price:</strong>
  <%= @product.price %>
</p>

<p>
  <strong>Postage:</strong>
  <%= @product.postage %>
</p>

<p>
  <strong>Categories:</strong>
  <%= @product.category.name %>
</p>

<%= form_tag charges_path do %>
<%= hidden_field_tag "product_id", "#{@product.id}" %>
<%= javascript_include_tag 'https://checkout.stripe.com/checkout.js',
  class: 'stripe-button',
  data: {
    key: ENV["PUBLISHABLE_KEY"],
    # total price x 100 because it must be in cents
    amount: @product.price*100 ,
    name: "Buy Now",
    description: @product.description,
    locale: "auto",
    currency: "aud"
  }
%>
<% end %>

<%= link_to 'Edit', edit_product_path(@product) %> |
<%= link_to 'Destroy', @product, method: :delete, data: { confirm: 'Are you sure?' } %> |
<%= link_to 'Back', products_path %>
</div>